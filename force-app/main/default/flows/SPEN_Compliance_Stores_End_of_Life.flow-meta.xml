<?xml version="1.0" encoding="UTF-8"?>
<Flow xmlns="http://soap.sforce.com/2006/04/metadata">
    <apiVersion>58.0</apiVersion>
    <assignments>
        <description>Adds the original recordId to the collection.</description>
        <name>Add_recordId_to_Collection</name>
        <label>Add recordId to Collection</label>
        <locationX>935</locationX>
        <locationY>2738</locationY>
        <assignmentItems>
            <assignToReference>recordIdsCollection</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>recordId</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>DisplayRecord</targetReference>
        </connector>
    </assignments>
    <assignments>
        <description>Adds the selected rows to recordIds collection.</description>
        <name>Add_to_recordIds_Collection</name>
        <label>Add to recordIds Collection</label>
        <locationX>935</locationX>
        <locationY>2630</locationY>
        <assignmentItems>
            <assignToReference>recordIdsCollection</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>selectedRecordIds</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Add_recordId_to_Collection</targetReference>
        </connector>
    </assignments>
    <assignments>
        <description>Adds the selected rows to recordIds collection.</description>
        <name>Add_to_recordIds_Collection_Global</name>
        <label>Add to recordIds Collection</label>
        <locationX>1282</locationX>
        <locationY>1538</locationY>
        <assignmentItems>
            <assignToReference>recordIdsCollection</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>selectedRecordIds</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <isGoTo>true</isGoTo>
            <targetReference>DisplayRecord</targetReference>
        </connector>
    </assignments>
    <assignments>
        <description>Adds the triggering record to the recordIdsCollection.</description>
        <name>Add_to_recordIdsCollection</name>
        <label>Add to recordIdsCollection</label>
        <locationX>1727</locationX>
        <locationY>2198</locationY>
        <assignmentItems>
            <assignToReference>recordIdsCollection</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>recordId</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>DisplayRecord</targetReference>
        </connector>
    </assignments>
    <assignments>
        <description>Assigns values to the record variable, and assigns the record to a collection. Used to update product transfers.</description>
        <name>Assign_Transfer_IsReceived_and_Quantity</name>
        <label>Assign Transfer IsReceived and Quantity</label>
        <locationX>1408</locationX>
        <locationY>4646</locationY>
        <assignmentItems>
            <assignToReference>updatedProductTransfer.IsReceived</assignToReference>
            <operator>Assign</operator>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>updatedProductTransfer.QuantityReceived</assignToReference>
            <operator>Assign</operator>
            <value>
                <numberValue>1.0</numberValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>updatedProductTransfer.Id</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Loop_for_Update_Transfers.Id</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>updatedProductTransfer.QuantityUnitOfMeasure</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>Each</stringValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>updatedProductTransfers</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>updatedProductTransfer</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Loop_for_Update_Transfers</targetReference>
        </connector>
    </assignments>
    <assignments>
        <description>Assigns values to the record variable, and assigns the record to a collection. Used to create product transfers.</description>
        <name>Assignment_for_Create_Product_Transfer</name>
        <label>Assignment for Create Product Transfer</label>
        <locationX>1408</locationX>
        <locationY>3830</locationY>
        <assignmentItems>
            <assignToReference>productTransfer.DestinationLocationId</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>newLocation.Id</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>productTransfer.Product2Id</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Loop_recordIdsCollection.Product2Id</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>productTransfer.QuantitySent</assignToReference>
            <operator>Assign</operator>
            <value>
                <numberValue>1.0</numberValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>productTransfer.QuantityUnitOfMeasure</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>Each</stringValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>productTransfer.ReceivedById</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$User.Id</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>productTransfer.RecordTypeId</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Get_Record_Type_for_Product_Transfer.Id</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>productTransfer.SPEN_Type__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>End of Life</stringValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>productTransfer.SPEN_Energy_Networks_ID__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Loop_recordIdsCollection.SPEN_Energy_Networks_ID__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>productTransfer.SPEN_Safety_Check_Date__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Loop_recordIdsCollection.SPEN_Safety_Check_Date__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>productTransfer.SourceLocationId</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Loop_recordIdsCollection.SPEN_Current_Location__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>productTransfer.SourceProductItemId</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Loop_recordIdsCollection.ProductItemId</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>productTransfer.Status</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>Completed</stringValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>productTransfer.SPEN_Serialised_Product_Helper__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Loop_recordIdsCollection.Id</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>productTransfer.SPEN_Transfer_Comments__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>inputEoLComments</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>productTransfer.SPEN_Transfer_Date__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>TODAY</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>productTransfer.SPEN_Previous_Status__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Loop_recordIdsCollection.SPEN_Item_Status__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>productTransfer.SPEN_New_Status__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>inputStatus</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>productTransfers</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>productTransfer</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Loop_recordIdsCollection</targetReference>
        </connector>
    </assignments>
    <assignments>
        <description>Assigns values to the record variable, and assigns the record to a collection. Used to create product transfer states.</description>
        <name>Assignment_for_Create_Product_Transfer_States</name>
        <label>Assignment for Create Product Transfer States</label>
        <locationX>1408</locationX>
        <locationY>4238</locationY>
        <assignmentItems>
            <assignToReference>productTransferState.Action</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>Receive</stringValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>productTransferState.ProductTransferId</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Loop_Created_Product_Transfers.Id</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>productTransferState.TransferState</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>Sent</stringValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>productTransferState.SerializedProductId</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Loop_Created_Product_Transfers.SPEN_Serialised_Product_Helper__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>productTransferStates</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>productTransferState</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Loop_Created_Product_Transfers</targetReference>
        </connector>
    </assignments>
    <assignments>
        <description>Assigns values to the record variable, and assigns the record to a collection. Used to update serialised products.</description>
        <name>Assignment_for_Update_Serialized_Products</name>
        <label>Assignment for Update Serialized Products</label>
        <locationX>1408</locationX>
        <locationY>5054</locationY>
        <assignmentItems>
            <assignToReference>updatedSerializedProduct.SPEN_Current_Location__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>newLocation.Id</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>updatedSerializedProduct.SPEN_Expected_Return_Date__c</assignToReference>
            <operator>Assign</operator>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>updatedSerializedProduct.SPEN_Item_Status__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>inputStatus</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>updatedSerializedProduct.Status</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>defineStatus</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>updatedSerializedProduct.Id</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Loop_recordIdsCollection_for_Update.Id</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>updatedSerializedProduct.SPEN_Energy_Networks_ID__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Loop_recordIdsCollection_for_Update.SPEN_Energy_Networks_ID__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>updatedSerializedProduct.SPEN_Type__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Loop_recordIdsCollection_for_Update.SPEN_Type__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>updatedSerializedProduct.SPEN_Category__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Loop_recordIdsCollection_for_Update.SPEN_Category__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>updatedSerializedProduct.SPEN_Location_Name__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>newLocation.Name</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>updatedSerializedProduct.SPEN_End_of_Life_Comments__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>inputEoLComments</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>updatedSerializedProduct.SPEN_Active__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <booleanValue>false</booleanValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>updatedSerializedProduct.OwnerId</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>newLocation.OwnerId</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>updatedSerializedProducts</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>updatedSerializedProduct</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Loop_recordIdsCollection_for_Update</targetReference>
        </connector>
    </assignments>
    <assignments>
        <description>Assigns the invalid item to a collection to display in a data table.</description>
        <name>Invalid_ENID</name>
        <label>Invalid ENID</label>
        <locationX>2514</locationX>
        <locationY>1106</locationY>
        <assignmentItems>
            <assignToReference>invalidENIDCollection</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>recordId</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>InvalidENID</targetReference>
        </connector>
    </assignments>
    <assignments>
        <description>If the item is invalid, assigns the invalid item to a collection to display in a data table.</description>
        <name>Invalid_Product_Collection</name>
        <label>Invalid Product Collection</label>
        <locationX>1018</locationX>
        <locationY>890</locationY>
        <assignmentItems>
            <assignToReference>invalidProductCollection</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>recordId</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>InvalidProduct</targetReference>
        </connector>
    </assignments>
    <choices>
        <name>LostStolen</name>
        <choiceText>Lost/Stolen</choiceText>
        <dataType>String</dataType>
        <value>
            <stringValue>Lost/Stolen</stringValue>
        </value>
    </choices>
    <choices>
        <name>Storage</name>
        <choiceText>Storage</choiceText>
        <dataType>String</dataType>
        <value>
            <stringValue>Storage</stringValue>
        </value>
    </choices>
    <choices>
        <name>Unserviceable</name>
        <choiceText>Unserviceable</choiceText>
        <dataType>String</dataType>
        <value>
            <stringValue>Unserviceable</stringValue>
        </value>
    </choices>
    <decisions>
        <description>Decision element to check if user selected rows on multiset.</description>
        <name>Check_If_User_Selected_Rows</name>
        <label>Check If User Selected Rows</label>
        <locationX>1414</locationX>
        <locationY>1430</locationY>
        <defaultConnector>
            <targetReference>No_Rows_Selected_Confirmation</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>None Selected</defaultConnectorLabel>
        <rules>
            <name>Rows_Selected</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>recordId.Id</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Add_to_recordIds_Collection_Global</targetReference>
            </connector>
            <label>Rows Selected</label>
        </rules>
    </decisions>
    <decisions>
        <description>Decision to check if inactive multiset items were found from Parent ENID being entered by the user.</description>
        <name>Check_Inactive_Multiset_Items_Found</name>
        <label>Check Inactive Multiset Items Found</label>
        <locationX>1612</locationX>
        <locationY>1214</locationY>
        <defaultConnector>
            <targetReference>Invalid_Item_None_Inactive</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>None Found</defaultConnectorLabel>
        <rules>
            <name>Inactive_Items_Found</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>recordIdsCollectionForSelection</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Multiset_Check_Global</targetReference>
            </connector>
            <label>Inactive Items Found</label>
        </rules>
    </decisions>
    <decisions>
        <description>Checks the status that the user chose, Storage or EoL.</description>
        <name>EOL_or_Storage</name>
        <label>EOL or Storage?</label>
        <locationX>1320</locationX>
        <locationY>3422</locationY>
        <defaultConnector>
            <targetReference>Get_EoL_Location</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>EOL Status</defaultConnectorLabel>
        <rules>
            <name>Storage_Status</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>inputStatus</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <elementReference>Storage</elementReference>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Loop_recordIdsCollection</targetReference>
            </connector>
            <label>Storage Status</label>
        </rules>
    </decisions>
    <decisions>
        <description>If the action is quick, checks if the item is valid for end of life.</description>
        <name>Is_Serialized_Product_Valid</name>
        <label>Is Serialized Product Valid</label>
        <locationX>930</locationX>
        <locationY>782</locationY>
        <defaultConnector>
            <targetReference>Invalid_Product_Collection</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Invalid</defaultConnectorLabel>
        <rules>
            <name>ValidProduct</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>recordId.SPEN_Active__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>recordId.RecordTypeId</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <elementReference>Get_Record_Type_for_Serialised_Product.Id</elementReference>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Multiset_Check</targetReference>
            </connector>
            <label>Valid Product</label>
        </rules>
    </decisions>
    <decisions>
        <name>More_Active_Items_Found</name>
        <label>More Active Items Found?</label>
        <locationX>1265</locationX>
        <locationY>2306</locationY>
        <defaultConnector>
            <isGoTo>true</isGoTo>
            <targetReference>Add_to_recordIdsCollection</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>None Found</defaultConnectorLabel>
        <rules>
            <name>More_Found</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>recordIdsCollectionForSelection</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>confirmMultisetCheck</targetReference>
            </connector>
            <label>More Found</label>
        </rules>
    </decisions>
    <decisions>
        <description>Checks if record is part of a multiset.</description>
        <name>Multiset_Check</name>
        <label>Multiset Check</label>
        <locationX>1496</locationX>
        <locationY>2090</locationY>
        <defaultConnector>
            <targetReference>Add_to_recordIdsCollection</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Single Item</defaultConnectorLabel>
        <rules>
            <name>Is_MultiSet</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>recordId.SPEN_Multiset__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Get_Multiset_Sibling_Records</targetReference>
            </connector>
            <label>Is MultiSet</label>
        </rules>
    </decisions>
    <decisions>
        <name>Permission_Set_Check</name>
        <label>Permission Set Check</label>
        <locationX>773</locationX>
        <locationY>566</locationY>
        <defaultConnector>
            <targetReference>Quick_Action_or_Global_Action</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Authorised</defaultConnectorLabel>
        <rules>
            <name>Missing_Serialised_Product_Record_Type</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Get_Record_Type_for_Serialised_Product.Id</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Missing_Serialised_Product_Record_Type_Screen</targetReference>
            </connector>
            <label>Missing Serialised Product Record Type</label>
        </rules>
        <rules>
            <name>Missing_Permission_Set</name>
            <conditionLogic>or</conditionLogic>
            <conditions>
                <leftValueReference>complianceTeamPermissionSetId</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>siteManagerPermissionSetId</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Missing_Permission_Sets_Screen</targetReference>
            </connector>
            <label>Missing Permission Set</label>
        </rules>
        <rules>
            <name>Missing_Assignment</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>foundPermissionSetAssignmentId</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Failed_Permission_Set_Check_Screen</targetReference>
            </connector>
            <label>Missing Assignment</label>
        </rules>
    </decisions>
    <decisions>
        <name>Product_Transfer_Record_Type_Found</name>
        <label>Product Transfer Record Type Found?</label>
        <locationX>1496</locationX>
        <locationY>3314</locationY>
        <defaultConnector>
            <targetReference>Missing_Product_Transfer_Record_Type_Screen</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>None Found</defaultConnectorLabel>
        <rules>
            <name>Found_Record_Type</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Get_Record_Type_for_Product_Transfer.Id</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>EOL_or_Storage</targetReference>
            </connector>
            <label>Found Record Type</label>
        </rules>
    </decisions>
    <decisions>
        <description>Decides if the action was quick or global by checking if the recordId variable is null.</description>
        <name>Quick_Action_or_Global_Action</name>
        <label>Quick Action or Global Action</label>
        <locationX>1496</locationX>
        <locationY>674</locationY>
        <defaultConnector>
            <targetReference>captureENID</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Global Action</defaultConnectorLabel>
        <rules>
            <name>Quick_Action</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>recordId.Id</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Is_Serialized_Product_Valid</targetReference>
            </connector>
            <label>Quick Action</label>
        </rules>
    </decisions>
    <decisions>
        <description>Decides if the user wants to include more valid multiset items.</description>
        <name>Update_Multiple_Check</name>
        <label>Update Multiple Check</label>
        <locationX>1067</locationX>
        <locationY>2522</locationY>
        <defaultConnector>
            <isGoTo>true</isGoTo>
            <targetReference>Add_to_recordIdsCollection</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>False</defaultConnectorLabel>
        <rules>
            <name>Update_Multiple_True</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>This_item_is_part_of_a_multiset_Would_you_like_to_more_items_in_the_set</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Add_to_recordIds_Collection</targetReference>
            </connector>
            <label>Update Multiple True</label>
        </rules>
    </decisions>
    <decisions>
        <description>Checks if the item is valid for End of Life.</description>
        <name>Valid_ENID</name>
        <label>Valid ENID</label>
        <locationX>2063</locationX>
        <locationY>998</locationY>
        <defaultConnector>
            <targetReference>Invalid_ENID</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Invalid</defaultConnectorLabel>
        <rules>
            <name>Valid_ENID_Parent</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>recordId.SPEN_Parent_Energy_Networks_ID__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <elementReference>inputENID</elementReference>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>recordId.Id</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Get_Multiset_Sibling_Records_Global</targetReference>
            </connector>
            <label>Valid ENID Parent</label>
        </rules>
        <rules>
            <name>ValidENIDSingle</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>recordId.Id</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>recordId.SPEN_Active__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Multiset_Check</targetReference>
            </connector>
            <label>Valid ENID Single</label>
        </rules>
        <rules>
            <name>None_Found</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>recordId.Id</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Invalid_Item_None_Found</targetReference>
            </connector>
            <label>None Found</label>
        </rules>
    </decisions>
    <description>Screen flow to allow users to retire items for service. Used when an item is lost, damaged, or stored. Transfers the item(s) to a new location determined by the EoL reason.</description>
    <dynamicChoiceSets>
        <name>lookupLocation</name>
        <dataType>String</dataType>
        <displayField>Name</displayField>
        <filterLogic>and</filterLogic>
        <filters>
            <field>LocationType</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>Storage</stringValue>
            </value>
        </filters>
        <object>Location</object>
        <outputAssignments>
            <assignToReference>newLocation.Id</assignToReference>
            <field>Id</field>
        </outputAssignments>
        <outputAssignments>
            <assignToReference>newLocation.Name</assignToReference>
            <field>Name</field>
        </outputAssignments>
        <outputAssignments>
            <assignToReference>newLocation.OwnerId</assignToReference>
            <field>OwnerId</field>
        </outputAssignments>
        <sortField>Name</sortField>
        <sortOrder>Asc</sortOrder>
        <valueField>Name</valueField>
    </dynamicChoiceSets>
    <environments>Default</environments>
    <formulas>
        <name>defineStatus</name>
        <dataType>String</dataType>
        <expression>IF( {!inputStatus} = {!LostStolen}, &quot;Lost&quot;, &quot;Damaged&quot;)</expression>
    </formulas>
    <formulas>
        <name>Running_User_Id_Return</name>
        <dataType>String</dataType>
        <expression>CASESAFEID({!$User.Id})</expression>
    </formulas>
    <formulas>
        <name>TODAY</name>
        <dataType>Date</dataType>
        <expression>TODAY()</expression>
    </formulas>
    <interviewLabel>Compliance Stores - End of Life {!$Flow.CurrentDateTime}</interviewLabel>
    <label>Compliance Stores - End of Life</label>
    <loops>
        <description>Loop created product transfer collection. Used to create product transfer states.</description>
        <name>Loop_Created_Product_Transfers</name>
        <label>Loop Created Product Transfers</label>
        <locationX>1320</locationX>
        <locationY>4130</locationY>
        <collectionReference>productTransfers</collectionReference>
        <iterationOrder>Asc</iterationOrder>
        <nextValueConnector>
            <targetReference>Assignment_for_Create_Product_Transfer_States</targetReference>
        </nextValueConnector>
        <noMoreValuesConnector>
            <targetReference>Create_Product_Transfer_State_Records</targetReference>
        </noMoreValuesConnector>
    </loops>
    <loops>
        <description>Loop created product transfer collection. Used to update product transfers.</description>
        <name>Loop_for_Update_Transfers</name>
        <label>Loop for Update Transfers</label>
        <locationX>1320</locationX>
        <locationY>4538</locationY>
        <collectionReference>productTransfers</collectionReference>
        <iterationOrder>Asc</iterationOrder>
        <nextValueConnector>
            <targetReference>Assign_Transfer_IsReceived_and_Quantity</targetReference>
        </nextValueConnector>
        <noMoreValuesConnector>
            <targetReference>Update_Product_Transfer_Record</targetReference>
        </noMoreValuesConnector>
    </loops>
    <loops>
        <description>Loops the collection of items to create product transfers.</description>
        <name>Loop_recordIdsCollection</name>
        <label>Loop recordIdsCollection</label>
        <locationX>1320</locationX>
        <locationY>3722</locationY>
        <collectionReference>recordIdsCollection</collectionReference>
        <iterationOrder>Asc</iterationOrder>
        <nextValueConnector>
            <targetReference>Assignment_for_Create_Product_Transfer</targetReference>
        </nextValueConnector>
        <noMoreValuesConnector>
            <targetReference>Create_Product_Transfer_Records</targetReference>
        </noMoreValuesConnector>
    </loops>
    <loops>
        <description>Loop the serialised product collection. Used to update serialised products.</description>
        <name>Loop_recordIdsCollection_for_Update</name>
        <label>Loop recordIdsCollection for Update</label>
        <locationX>1320</locationX>
        <locationY>4946</locationY>
        <collectionReference>recordIdsCollection</collectionReference>
        <iterationOrder>Asc</iterationOrder>
        <nextValueConnector>
            <targetReference>Assignment_for_Update_Serialized_Products</targetReference>
        </nextValueConnector>
        <noMoreValuesConnector>
            <targetReference>Update_Serialized_Products</targetReference>
        </noMoreValuesConnector>
    </loops>
    <processMetadataValues>
        <name>BuilderType</name>
        <value>
            <stringValue>LightningFlowBuilder</stringValue>
        </value>
    </processMetadataValues>
    <processMetadataValues>
        <name>CanvasMode</name>
        <value>
            <stringValue>AUTO_LAYOUT_CANVAS</stringValue>
        </value>
    </processMetadataValues>
    <processMetadataValues>
        <name>OriginBuilderType</name>
        <value>
            <stringValue>LightningFlowBuilder</stringValue>
        </value>
    </processMetadataValues>
    <processType>Flow</processType>
    <recordCreates>
        <description>Creates a product transfer for each serialised product in the record collection.</description>
        <name>Create_Product_Transfer_Records</name>
        <label>Create Product Transfer Records</label>
        <locationX>1320</locationX>
        <locationY>4022</locationY>
        <connector>
            <targetReference>Loop_Created_Product_Transfers</targetReference>
        </connector>
        <inputReference>productTransfers</inputReference>
    </recordCreates>
    <recordCreates>
        <description>Uses the collection variable to create product transfer states. Used to correctly move items.</description>
        <name>Create_Product_Transfer_State_Records</name>
        <label>Create Product Transfer State Records</label>
        <locationX>1320</locationX>
        <locationY>4430</locationY>
        <connector>
            <targetReference>Loop_for_Update_Transfers</targetReference>
        </connector>
        <inputReference>productTransferStates</inputReference>
    </recordCreates>
    <recordLookups>
        <name>Get_Compliance_Team_Permission_Set_Id</name>
        <label>Get Compliance Team Permission Set Id</label>
        <locationX>773</locationX>
        <locationY>134</locationY>
        <assignNullValuesIfNoRecordsFound>true</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Get_Site_Manager_Permission_Set_Id</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Name</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>SPEN_Compliance_Stores_Compliance_Team</stringValue>
            </value>
        </filters>
        <object>PermissionSet</object>
        <outputAssignments>
            <assignToReference>complianceTeamPermissionSetId</assignToReference>
            <field>Id</field>
        </outputAssignments>
    </recordLookups>
    <recordLookups>
        <description>Gets the EoL location to send the item to.</description>
        <name>Get_EoL_Location</name>
        <label>Get EoL Location</label>
        <locationX>1408</locationX>
        <locationY>3530</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Loop_recordIdsCollection</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Name</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>NO LONGER IN USE</stringValue>
            </value>
        </filters>
        <object>Location</object>
        <outputReference>newLocation</outputReference>
        <queriedFields>Id</queriedFields>
        <queriedFields>Name</queriedFields>
        <queriedFields>OwnerId</queriedFields>
    </recordLookups>
    <recordLookups>
        <description>Gets all the records that share the same Parents ENID as the triggering record and stores them in the recordIdsCollectionForSelection variable.</description>
        <name>Get_Multiset_Sibling_Records</name>
        <label>Get Multiset Sibling Records</label>
        <locationX>1265</locationX>
        <locationY>2198</locationY>
        <assignNullValuesIfNoRecordsFound>true</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>More_Active_Items_Found</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>SPEN_Parent_Energy_Networks_ID__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>recordId.SPEN_Parent_Energy_Networks_ID__c</elementReference>
            </value>
        </filters>
        <filters>
            <field>SPEN_Active__c</field>
            <operator>EqualTo</operator>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </filters>
        <filters>
            <field>Id</field>
            <operator>NotEqualTo</operator>
            <value>
                <elementReference>recordId.Id</elementReference>
            </value>
        </filters>
        <object>SerializedProduct</object>
        <outputReference>recordIdsCollectionForSelection</outputReference>
        <queriedFields>Id</queriedFields>
        <queriedFields>Name</queriedFields>
        <queriedFields>SPEN_Base_Location__c</queriedFields>
        <queriedFields>SPEN_Base_Location_Name__c</queriedFields>
        <queriedFields>SPEN_Current_Location__c</queriedFields>
        <queriedFields>SPEN_Location_Name__c</queriedFields>
        <queriedFields>Product2Id</queriedFields>
        <queriedFields>ProductItemId</queriedFields>
        <queriedFields>SPEN_Category__c</queriedFields>
        <queriedFields>SPEN_Comments__c</queriedFields>
        <queriedFields>SPEN_End_of_Life_Comments__c</queriedFields>
        <queriedFields>SPEN_Energy_Networks_ID__c</queriedFields>
        <queriedFields>SPEN_Parent_Energy_Networks_ID__c</queriedFields>
        <queriedFields>SPEN_Expected_Return_Date__c</queriedFields>
        <queriedFields>SPEN_Item_Description__c</queriedFields>
        <queriedFields>SPEN_Item_Status__c</queriedFields>
        <queriedFields>SPEN_Manufacturer__c</queriedFields>
        <queriedFields>SPEN_Multiset__c</queriedFields>
        <queriedFields>SPEN_Safety_Check_Date__c</queriedFields>
        <queriedFields>SPEN_SPD_SPM__c</queriedFields>
        <queriedFields>SPEN_Type__c</queriedFields>
        <queriedFields>Status</queriedFields>
        <queriedFields>SPEN_Do_Not_Use_After__c</queriedFields>
        <queriedFields>SPEN_Calibration_Due__c</queriedFields>
        <queriedFields>SPEN_Service_Due__c</queriedFields>
        <queriedFields>SPEN_Insurance_Inspection_Due__c</queriedFields>
        <queriedFields>SPEN_Replacement_Due__c</queriedFields>
        <queriedFields>SPEN_Last_Calibrated_By__c</queriedFields>
        <queriedFields>SPEN_Insurance_Inspection_By__c</queriedFields>
        <queriedFields>SPEN_Last_Inspected_By__c</queriedFields>
        <queriedFields>SPEN_Last_Serviced_By__c</queriedFields>
    </recordLookups>
    <recordLookups>
        <description>Gets all the records that share the same Parents ENID as the found record and stores them in the recordIdsCollectionForSelection variable.</description>
        <name>Get_Multiset_Sibling_Records_Global</name>
        <label>Get Multiset Sibling Records</label>
        <locationX>1612</locationX>
        <locationY>1106</locationY>
        <assignNullValuesIfNoRecordsFound>true</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Check_Inactive_Multiset_Items_Found</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>SPEN_Parent_Energy_Networks_ID__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>recordId.SPEN_Parent_Energy_Networks_ID__c</elementReference>
            </value>
        </filters>
        <filters>
            <field>SPEN_Active__c</field>
            <operator>EqualTo</operator>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </filters>
        <object>SerializedProduct</object>
        <outputReference>recordIdsCollectionForSelection</outputReference>
        <queriedFields>Id</queriedFields>
        <queriedFields>Name</queriedFields>
        <queriedFields>SPEN_Base_Location__c</queriedFields>
        <queriedFields>SPEN_Base_Location_Name__c</queriedFields>
        <queriedFields>SPEN_Current_Location__c</queriedFields>
        <queriedFields>SPEN_Location_Name__c</queriedFields>
        <queriedFields>Product2Id</queriedFields>
        <queriedFields>ProductItemId</queriedFields>
        <queriedFields>SPEN_Category__c</queriedFields>
        <queriedFields>SPEN_Comments__c</queriedFields>
        <queriedFields>SPEN_End_of_Life_Comments__c</queriedFields>
        <queriedFields>SPEN_Energy_Networks_ID__c</queriedFields>
        <queriedFields>SPEN_Parent_Energy_Networks_ID__c</queriedFields>
        <queriedFields>SPEN_Expected_Return_Date__c</queriedFields>
        <queriedFields>SPEN_Item_Description__c</queriedFields>
        <queriedFields>SPEN_Item_Status__c</queriedFields>
        <queriedFields>SPEN_Manufacturer__c</queriedFields>
        <queriedFields>SPEN_Multiset__c</queriedFields>
        <queriedFields>SPEN_Safety_Check_Date__c</queriedFields>
        <queriedFields>SPEN_SPD_SPM__c</queriedFields>
        <queriedFields>SPEN_Type__c</queriedFields>
        <queriedFields>Status</queriedFields>
        <queriedFields>SPEN_Do_Not_Use_After__c</queriedFields>
        <queriedFields>SPEN_Calibration_Due__c</queriedFields>
        <queriedFields>SPEN_Service_Due__c</queriedFields>
        <queriedFields>SPEN_Replacement_Due__c</queriedFields>
        <queriedFields>SPEN_Insurance_Inspection_Due__c</queriedFields>
        <queriedFields>SPEN_Last_Inspected_By__c</queriedFields>
        <queriedFields>SPEN_Insurance_Inspection_By__c</queriedFields>
        <queriedFields>SPEN_Last_Calibrated_By__c</queriedFields>
        <queriedFields>SPEN_Last_Serviced_By__c</queriedFields>
        <sortField>SPEN_Energy_Networks_ID__c</sortField>
        <sortOrder>Asc</sortOrder>
    </recordLookups>
    <recordLookups>
        <name>Get_Permission_Set_Assignment</name>
        <label>Get Permission Set Assignment</label>
        <locationX>773</locationX>
        <locationY>350</locationY>
        <assignNullValuesIfNoRecordsFound>true</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Get_Record_Type_for_Serialised_Product</targetReference>
        </connector>
        <filterLogic>(1 OR 2) AND 3</filterLogic>
        <filters>
            <field>PermissionSetId</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>complianceTeamPermissionSetId</elementReference>
            </value>
        </filters>
        <filters>
            <field>PermissionSetId</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>siteManagerPermissionSetId</elementReference>
            </value>
        </filters>
        <filters>
            <field>AssigneeId</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>Running_User_Id_Return</elementReference>
            </value>
        </filters>
        <object>PermissionSetAssignment</object>
        <outputAssignments>
            <assignToReference>foundPermissionSetAssignmentId</assignToReference>
            <field>Id</field>
        </outputAssignments>
    </recordLookups>
    <recordLookups>
        <description>Gets the Compliance Stores record type for use in later product transfer creation.</description>
        <name>Get_Record_Type_for_Product_Transfer</name>
        <label>Get Record Type for Product Transfer</label>
        <locationX>1496</locationX>
        <locationY>3206</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Product_Transfer_Record_Type_Found</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>SobjectType</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>ProductTransfer</stringValue>
            </value>
        </filters>
        <filters>
            <field>DeveloperName</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>SPEN_Compliance_Stores</stringValue>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>RecordType</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <description>Get the Compliance Stores record type to be used in later Get Records elements.</description>
        <name>Get_Record_Type_for_Serialised_Product</name>
        <label>Get Record Type for Serialised Product</label>
        <locationX>773</locationX>
        <locationY>458</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Permission_Set_Check</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>SobjectType</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>SerializedProduct</stringValue>
            </value>
        </filters>
        <filters>
            <field>DeveloperName</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>SPEN_Compliance_Stores</stringValue>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>RecordType</object>
        <queriedFields>Id</queriedFields>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <description>Gets records that match the input, matching the ENID or Parent ENID. Record must be active and the correct record type.</description>
        <name>Get_Serialized_Product_from_inputENID</name>
        <label>Get Serialized Product from inputENID</label>
        <locationX>2063</locationX>
        <locationY>890</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Valid_ENID</targetReference>
        </connector>
        <filterLogic>(1 OR 2) AND 3</filterLogic>
        <filters>
            <field>SPEN_Energy_Networks_ID__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>inputENID</elementReference>
            </value>
        </filters>
        <filters>
            <field>SPEN_Parent_Energy_Networks_ID__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>inputENID</elementReference>
            </value>
        </filters>
        <filters>
            <field>RecordTypeId</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>Get_Record_Type_for_Serialised_Product.Id</elementReference>
            </value>
        </filters>
        <object>SerializedProduct</object>
        <outputReference>recordId</outputReference>
        <queriedFields>Id</queriedFields>
        <queriedFields>Name</queriedFields>
        <queriedFields>OwnerId</queriedFields>
        <queriedFields>Product2Id</queriedFields>
        <queriedFields>ProductItemId</queriedFields>
        <queriedFields>SPEN_Active__c</queriedFields>
        <queriedFields>SPEN_Base_Location__c</queriedFields>
        <queriedFields>SPEN_Base_Location_Name__c</queriedFields>
        <queriedFields>SPEN_Category__c</queriedFields>
        <queriedFields>SPEN_Comments__c</queriedFields>
        <queriedFields>SPEN_Current_Location__c</queriedFields>
        <queriedFields>SPEN_End_of_Life_Comments__c</queriedFields>
        <queriedFields>SPEN_Energy_Networks_ID__c</queriedFields>
        <queriedFields>SPEN_Expected_Return_Date__c</queriedFields>
        <queriedFields>SPEN_Item_Description__c</queriedFields>
        <queriedFields>SPEN_Item_Status__c</queriedFields>
        <queriedFields>SPEN_Location_Name__c</queriedFields>
        <queriedFields>SPEN_Manufacturer__c</queriedFields>
        <queriedFields>SPEN_Multiset__c</queriedFields>
        <queriedFields>SPEN_Parent_Energy_Networks_ID__c</queriedFields>
        <queriedFields>SPEN_Safety_Check_Date__c</queriedFields>
        <queriedFields>SPEN_SPD_SPM__c</queriedFields>
        <queriedFields>SPEN_Type__c</queriedFields>
        <queriedFields>Status</queriedFields>
        <queriedFields>SPEN_Do_Not_Use_After__c</queriedFields>
        <queriedFields>SPEN_Calibration_Due__c</queriedFields>
        <queriedFields>SPEN_Service_Due__c</queriedFields>
        <queriedFields>SPEN_Replacement_Due__c</queriedFields>
        <queriedFields>SPEN_Insurance_Inspection_Due__c</queriedFields>
        <queriedFields>SPEN_Insurance_Inspection_By__c</queriedFields>
        <queriedFields>SPEN_Last_Inspected_By__c</queriedFields>
        <queriedFields>SPEN_Last_Serviced_By__c</queriedFields>
        <queriedFields>SPEN_Last_Calibrated_By__c</queriedFields>
    </recordLookups>
    <recordLookups>
        <name>Get_Site_Manager_Permission_Set_Id</name>
        <label>Get Site Manager Permission Set Id</label>
        <locationX>773</locationX>
        <locationY>242</locationY>
        <assignNullValuesIfNoRecordsFound>true</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Get_Permission_Set_Assignment</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Name</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>SPEN_Compliance_Stores_Site_Manager</stringValue>
            </value>
        </filters>
        <object>PermissionSet</object>
        <outputAssignments>
            <assignToReference>siteManagerPermissionSetId</assignToReference>
            <field>Id</field>
        </outputAssignments>
    </recordLookups>
    <recordUpdates>
        <description>Updates the previously created product transfers. Used to receive the item that has been transferred.</description>
        <name>Update_Product_Transfer_Record</name>
        <label>Update Product Transfer Record</label>
        <locationX>1320</locationX>
        <locationY>4838</locationY>
        <connector>
            <targetReference>Loop_recordIdsCollection_for_Update</targetReference>
        </connector>
        <inputReference>updatedProductTransfers</inputReference>
    </recordUpdates>
    <recordUpdates>
        <description>Updates the serialised products using the collection variable from the previous loop.</description>
        <name>Update_Serialized_Products</name>
        <label>Update Serialized Products</label>
        <locationX>1320</locationX>
        <locationY>5246</locationY>
        <connector>
            <targetReference>FinalConfirmation</targetReference>
        </connector>
        <inputReference>updatedSerializedProducts</inputReference>
    </recordUpdates>
    <runInMode>SystemModeWithoutSharing</runInMode>
    <screens>
        <description>If the action is global, allows the user to type in or scan an ENID.</description>
        <name>captureENID</name>
        <label>Enter Energy Networks ID</label>
        <locationX>2063</locationX>
        <locationY>782</locationY>
        <allowBack>true</allowBack>
        <allowFinish>true</allowFinish>
        <allowPause>false</allowPause>
        <connector>
            <targetReference>Get_Serialized_Product_from_inputENID</targetReference>
        </connector>
        <fields>
            <name>inputENID</name>
            <dataType>String</dataType>
            <fieldText>Input or Scan Energy Networks ID:</fieldText>
            <fieldType>InputField</fieldType>
            <inputsOnNextNavToAssocScrn>UseStoredValues</inputsOnNextNavToAssocScrn>
            <isRequired>true</isRequired>
        </fields>
        <showFooter>true</showFooter>
        <showHeader>false</showHeader>
    </screens>
    <screens>
        <description>Screen to display the option to retire multiple items in the multiset.</description>
        <name>confirmMultisetCheck</name>
        <label>Multiset Check</label>
        <locationX>1067</locationX>
        <locationY>2414</locationY>
        <allowBack>true</allowBack>
        <allowFinish>true</allowFinish>
        <allowPause>true</allowPause>
        <connector>
            <targetReference>Update_Multiple_Check</targetReference>
        </connector>
        <fields>
            <name>displayENIDs</name>
            <fieldText>&lt;p&gt;&lt;span style=&quot;font-size: 14px;&quot;&gt;Energy Networks ID: &lt;/span&gt;&lt;strong style=&quot;font-size: 14px;&quot;&gt;{!recordId.SPEN_Energy_Networks_ID__c}&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-size: 14px;&quot;&gt;Parent Energy Networks ID: &lt;/span&gt;&lt;strong style=&quot;font-size: 14px;&quot;&gt;{!recordId.SPEN_Parent_Energy_Networks_ID__c}&lt;/strong&gt;&lt;/p&gt;</fieldText>
            <fieldType>DisplayText</fieldType>
        </fields>
        <fields>
            <name>This_item_is_part_of_a_multiset_Would_you_like_to_more_items_in_the_set</name>
            <dataType>Boolean</dataType>
            <fieldText>This item is part of a multiset. Would you like to retire more items in the set?</fieldText>
            <fieldType>InputField</fieldType>
            <inputsOnNextNavToAssocScrn>UseStoredValues</inputsOnNextNavToAssocScrn>
            <isRequired>true</isRequired>
        </fields>
        <fields>
            <name>confirmMultisetCheck_Section1</name>
            <fieldType>RegionContainer</fieldType>
            <fields>
                <name>confirmMultisetCheck_Section1_Column1</name>
                <fieldType>Region</fieldType>
                <fields>
                    <name>displaySelectionPrompt</name>
                    <fieldText>&lt;p&gt;&lt;span style=&quot;font-size: 14px; background-color: rgb(255, 255, 255); color: rgb(68, 68, 68);&quot;&gt;Please select the other items you would like to retire:&lt;/span&gt;&lt;/p&gt;</fieldText>
                    <fieldType>DisplayText</fieldType>
                </fields>
                <fields>
                    <name>datatableSelectRecords</name>
                    <dataTypeMappings>
                        <typeName>T</typeName>
                        <typeValue>SerializedProduct</typeValue>
                    </dataTypeMappings>
                    <extensionName>flowruntime:datatable</extensionName>
                    <fieldType>ComponentInstance</fieldType>
                    <inputParameters>
                        <name>label</name>
                        <value>
                            <stringValue>Multiset Items</stringValue>
                        </value>
                    </inputParameters>
                    <inputParameters>
                        <name>selectionMode</name>
                        <value>
                            <stringValue>MULTI_SELECT</stringValue>
                        </value>
                    </inputParameters>
                    <inputParameters>
                        <name>minRowSelection</name>
                        <value>
                            <numberValue>0.0</numberValue>
                        </value>
                    </inputParameters>
                    <inputParameters>
                        <name>shouldDisplayLabel</name>
                        <value>
                            <booleanValue>true</booleanValue>
                        </value>
                    </inputParameters>
                    <inputParameters>
                        <name>tableData</name>
                        <value>
                            <elementReference>recordIdsCollectionForSelection</elementReference>
                        </value>
                    </inputParameters>
                    <inputParameters>
                        <name>isShowSearchBar</name>
                        <value>
                            <booleanValue>true</booleanValue>
                        </value>
                    </inputParameters>
                    <inputParameters>
                        <name>columns</name>
                        <value>
                            <stringValue>[{&quot;apiName&quot;:&quot;SPEN_Type__c&quot;,&quot;guid&quot;:&quot;column-d6b3&quot;,&quot;editable&quot;:false,&quot;hasCustomHeaderLabel&quot;:false,&quot;customHeaderLabel&quot;:&quot;&quot;,&quot;wrapText&quot;:true,&quot;order&quot;:0,&quot;label&quot;:&quot;Type&quot;,&quot;type&quot;:&quot;customRichText&quot;},{&quot;apiName&quot;:&quot;SPEN_Energy_Networks_ID__c&quot;,&quot;guid&quot;:&quot;column-8de1&quot;,&quot;editable&quot;:false,&quot;hasCustomHeaderLabel&quot;:false,&quot;customHeaderLabel&quot;:&quot;&quot;,&quot;wrapText&quot;:true,&quot;order&quot;:1,&quot;label&quot;:&quot;Energy Networks ID&quot;,&quot;type&quot;:&quot;customRichText&quot;},{&quot;apiName&quot;:&quot;SPEN_Location_Name__c&quot;,&quot;guid&quot;:&quot;column-7016&quot;,&quot;editable&quot;:false,&quot;hasCustomHeaderLabel&quot;:true,&quot;customHeaderLabel&quot;:&quot;Current Location&quot;,&quot;wrapText&quot;:true,&quot;order&quot;:2,&quot;label&quot;:&quot;Location Name&quot;,&quot;type&quot;:&quot;customRichText&quot;},{&quot;apiName&quot;:&quot;SPEN_Base_Location_Name__c&quot;,&quot;guid&quot;:&quot;column-01d6&quot;,&quot;editable&quot;:false,&quot;hasCustomHeaderLabel&quot;:true,&quot;customHeaderLabel&quot;:&quot;Base Location&quot;,&quot;wrapText&quot;:true,&quot;order&quot;:3,&quot;label&quot;:&quot;Base Location Name&quot;,&quot;type&quot;:&quot;customRichText&quot;},{&quot;apiName&quot;:&quot;SPEN_Item_Status__c&quot;,&quot;guid&quot;:&quot;column-dcd2&quot;,&quot;editable&quot;:false,&quot;hasCustomHeaderLabel&quot;:false,&quot;customHeaderLabel&quot;:&quot;&quot;,&quot;wrapText&quot;:true,&quot;order&quot;:4,&quot;label&quot;:&quot;Item Status&quot;,&quot;type&quot;:&quot;text&quot;}]</stringValue>
                        </value>
                    </inputParameters>
                    <inputsOnNextNavToAssocScrn>UseStoredValues</inputsOnNextNavToAssocScrn>
                    <isRequired>true</isRequired>
                    <outputParameters>
                        <assignToReference>selectedRecordIds</assignToReference>
                        <name>selectedRows</name>
                    </outputParameters>
                </fields>
                <inputParameters>
                    <name>width</name>
                    <value>
                        <stringValue>12</stringValue>
                    </value>
                </inputParameters>
                <isRequired>false</isRequired>
            </fields>
            <isRequired>false</isRequired>
            <regionContainerType>SectionWithoutHeader</regionContainerType>
            <visibilityRule>
                <conditionLogic>and</conditionLogic>
                <conditions>
                    <leftValueReference>This_item_is_part_of_a_multiset_Would_you_like_to_more_items_in_the_set</leftValueReference>
                    <operator>EqualTo</operator>
                    <rightValue>
                        <booleanValue>true</booleanValue>
                    </rightValue>
                </conditions>
            </visibilityRule>
        </fields>
        <showFooter>true</showFooter>
        <showHeader>false</showHeader>
    </screens>
    <screens>
        <description>Display the collection variable in a data table and allow users to enter a status, storage location, and comments for the end of life.</description>
        <name>DisplayRecord</name>
        <label>Display Record</label>
        <locationX>1496</locationX>
        <locationY>3098</locationY>
        <allowBack>true</allowBack>
        <allowFinish>true</allowFinish>
        <allowPause>false</allowPause>
        <backButtonLabel>Cancel</backButtonLabel>
        <connector>
            <targetReference>Get_Record_Type_for_Product_Transfer</targetReference>
        </connector>
        <fields>
            <name>DisplayConfirmation</name>
            <fieldText>&lt;p&gt;&lt;span style=&quot;font-size: 14px;&quot;&gt;Confirm the end of life for the following item(s):&lt;/span&gt;&lt;/p&gt;</fieldText>
            <fieldType>DisplayText</fieldType>
        </fields>
        <fields>
            <name>inputStatus</name>
            <choiceReferences>LostStolen</choiceReferences>
            <choiceReferences>Unserviceable</choiceReferences>
            <choiceReferences>Storage</choiceReferences>
            <dataType>String</dataType>
            <fieldText>Status</fieldText>
            <fieldType>DropdownBox</fieldType>
            <inputsOnNextNavToAssocScrn>UseStoredValues</inputsOnNextNavToAssocScrn>
            <isRequired>true</isRequired>
        </fields>
        <fields>
            <name>Storage_Location</name>
            <choiceReferences>lookupLocation</choiceReferences>
            <extensionName>flowruntime:choiceLookup</extensionName>
            <fieldText>Storage Location</fieldText>
            <fieldType>ComponentChoice</fieldType>
            <inputsOnNextNavToAssocScrn>UseStoredValues</inputsOnNextNavToAssocScrn>
            <isRequired>true</isRequired>
            <storeOutputAutomatically>true</storeOutputAutomatically>
            <visibilityRule>
                <conditionLogic>and</conditionLogic>
                <conditions>
                    <leftValueReference>inputStatus</leftValueReference>
                    <operator>EqualTo</operator>
                    <rightValue>
                        <elementReference>Storage</elementReference>
                    </rightValue>
                </conditions>
            </visibilityRule>
        </fields>
        <fields>
            <name>inputEoLComments</name>
            <dataType>String</dataType>
            <fieldText>Comments</fieldText>
            <fieldType>InputField</fieldType>
            <inputsOnNextNavToAssocScrn>UseStoredValues</inputsOnNextNavToAssocScrn>
            <isRequired>true</isRequired>
        </fields>
        <fields>
            <name>confirmItemsTable</name>
            <dataTypeMappings>
                <typeName>T</typeName>
                <typeValue>SerializedProduct</typeValue>
            </dataTypeMappings>
            <extensionName>flowruntime:datatable</extensionName>
            <fieldType>ComponentInstance</fieldType>
            <inputParameters>
                <name>label</name>
                <value>
                    <stringValue>Confirm Items</stringValue>
                </value>
            </inputParameters>
            <inputParameters>
                <name>selectionMode</name>
                <value>
                    <stringValue>NO_SELECTION</stringValue>
                </value>
            </inputParameters>
            <inputParameters>
                <name>minRowSelection</name>
                <value>
                    <numberValue>0.0</numberValue>
                </value>
            </inputParameters>
            <inputParameters>
                <name>tableData</name>
                <value>
                    <elementReference>recordIdsCollection</elementReference>
                </value>
            </inputParameters>
            <inputParameters>
                <name>columns</name>
                <value>
                    <stringValue>[{&quot;apiName&quot;:&quot;SPEN_Energy_Networks_ID__c&quot;,&quot;guid&quot;:&quot;column-1b04&quot;,&quot;editable&quot;:false,&quot;hasCustomHeaderLabel&quot;:false,&quot;customHeaderLabel&quot;:&quot;&quot;,&quot;wrapText&quot;:true,&quot;order&quot;:0,&quot;label&quot;:&quot;Energy Networks ID&quot;,&quot;type&quot;:&quot;customRichText&quot;},{&quot;apiName&quot;:&quot;SPEN_Type__c&quot;,&quot;guid&quot;:&quot;column-8229&quot;,&quot;editable&quot;:false,&quot;hasCustomHeaderLabel&quot;:false,&quot;customHeaderLabel&quot;:&quot;&quot;,&quot;wrapText&quot;:true,&quot;order&quot;:1,&quot;label&quot;:&quot;Type&quot;,&quot;type&quot;:&quot;customRichText&quot;},{&quot;apiName&quot;:&quot;SPEN_Location_Name__c&quot;,&quot;guid&quot;:&quot;column-53be&quot;,&quot;editable&quot;:false,&quot;hasCustomHeaderLabel&quot;:true,&quot;customHeaderLabel&quot;:&quot;Current Location&quot;,&quot;wrapText&quot;:true,&quot;order&quot;:2,&quot;label&quot;:&quot;Location Name&quot;,&quot;type&quot;:&quot;customRichText&quot;},{&quot;apiName&quot;:&quot;SPEN_Base_Location_Name__c&quot;,&quot;guid&quot;:&quot;column-a47d&quot;,&quot;editable&quot;:false,&quot;hasCustomHeaderLabel&quot;:true,&quot;customHeaderLabel&quot;:&quot;Base Location&quot;,&quot;wrapText&quot;:true,&quot;order&quot;:3,&quot;label&quot;:&quot;Base Location Name&quot;,&quot;type&quot;:&quot;customRichText&quot;},{&quot;apiName&quot;:&quot;SPEN_Item_Status__c&quot;,&quot;guid&quot;:&quot;column-85f9&quot;,&quot;editable&quot;:false,&quot;hasCustomHeaderLabel&quot;:false,&quot;customHeaderLabel&quot;:&quot;&quot;,&quot;wrapText&quot;:true,&quot;order&quot;:4,&quot;label&quot;:&quot;Item Status&quot;,&quot;type&quot;:&quot;text&quot;}]</stringValue>
                </value>
            </inputParameters>
            <inputParameters>
                <name>maxRowSelection</name>
                <value>
                    <numberValue>0.0</numberValue>
                </value>
            </inputParameters>
            <inputParameters>
                <name>isShowSearchBar</name>
                <value>
                    <booleanValue>true</booleanValue>
                </value>
            </inputParameters>
            <inputsOnNextNavToAssocScrn>UseStoredValues</inputsOnNextNavToAssocScrn>
            <isRequired>true</isRequired>
            <storeOutputAutomatically>true</storeOutputAutomatically>
        </fields>
        <nextOrFinishButtonLabel>Confirm</nextOrFinishButtonLabel>
        <showFooter>true</showFooter>
        <showHeader>false</showHeader>
    </screens>
    <screens>
        <description>Screen to confirm to the user that they don&apos;t have the relevant permissions to run an inspection in the system.</description>
        <name>Failed_Permission_Set_Check_Screen</name>
        <label>Failed Permission Set Check Screen</label>
        <locationX>578</locationX>
        <locationY>674</locationY>
        <allowBack>false</allowBack>
        <allowFinish>true</allowFinish>
        <allowPause>false</allowPause>
        <fields>
            <name>NotAuthorisedDisplayText</name>
            <fieldText>&lt;p&gt;&lt;span style=&quot;font-size: 14px;&quot;&gt;You are not authorised to process end of life for this equipment.&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-size: 14px;&quot;&gt;If you should have authorisation, please speak with your team leader/manager to request access.&lt;/span&gt;&lt;/p&gt;</fieldText>
            <fieldType>DisplayText</fieldType>
        </fields>
        <showFooter>true</showFooter>
        <showHeader>false</showHeader>
    </screens>
    <screens>
        <description>Display confirmation message and updated record details of Serialized Products.</description>
        <name>FinalConfirmation</name>
        <label>Final Confirmation</label>
        <locationX>1320</locationX>
        <locationY>5354</locationY>
        <allowBack>false</allowBack>
        <allowFinish>true</allowFinish>
        <allowPause>false</allowPause>
        <fields>
            <name>FinalConfirmationMessage</name>
            <fieldText>&lt;p&gt;&lt;span style=&quot;font-size: 14px;&quot;&gt;The below item(s) have been deactivated:&lt;/span&gt;&lt;/p&gt;</fieldText>
            <fieldType>DisplayText</fieldType>
        </fields>
        <fields>
            <name>tableFinalUpdatedProducts</name>
            <dataTypeMappings>
                <typeName>T</typeName>
                <typeValue>SerializedProduct</typeValue>
            </dataTypeMappings>
            <extensionName>flowruntime:datatable</extensionName>
            <fieldType>ComponentInstance</fieldType>
            <inputParameters>
                <name>label</name>
                <value>
                    <stringValue>Updated Products</stringValue>
                </value>
            </inputParameters>
            <inputParameters>
                <name>selectionMode</name>
                <value>
                    <stringValue>NO_SELECTION</stringValue>
                </value>
            </inputParameters>
            <inputParameters>
                <name>minRowSelection</name>
                <value>
                    <numberValue>0.0</numberValue>
                </value>
            </inputParameters>
            <inputParameters>
                <name>tableData</name>
                <value>
                    <elementReference>updatedSerializedProducts</elementReference>
                </value>
            </inputParameters>
            <inputParameters>
                <name>columns</name>
                <value>
                    <stringValue>[{&quot;apiName&quot;:&quot;SPEN_Energy_Networks_ID__c&quot;,&quot;guid&quot;:&quot;column-1b2a&quot;,&quot;editable&quot;:false,&quot;hasCustomHeaderLabel&quot;:false,&quot;customHeaderLabel&quot;:&quot;&quot;,&quot;wrapText&quot;:true,&quot;order&quot;:0,&quot;label&quot;:&quot;Energy Networks ID&quot;,&quot;type&quot;:&quot;customRichText&quot;},{&quot;apiName&quot;:&quot;SPEN_Type__c&quot;,&quot;guid&quot;:&quot;column-058b&quot;,&quot;editable&quot;:false,&quot;hasCustomHeaderLabel&quot;:true,&quot;customHeaderLabel&quot;:&quot;Product Name&quot;,&quot;wrapText&quot;:true,&quot;order&quot;:1,&quot;label&quot;:&quot;Type&quot;,&quot;type&quot;:&quot;customRichText&quot;},{&quot;apiName&quot;:&quot;SPEN_Category__c&quot;,&quot;guid&quot;:&quot;column-0cc5&quot;,&quot;editable&quot;:false,&quot;hasCustomHeaderLabel&quot;:false,&quot;customHeaderLabel&quot;:&quot;&quot;,&quot;wrapText&quot;:true,&quot;order&quot;:2,&quot;label&quot;:&quot;Category&quot;,&quot;type&quot;:&quot;customRichText&quot;},{&quot;apiName&quot;:&quot;SPEN_Item_Status__c&quot;,&quot;guid&quot;:&quot;column-97fd&quot;,&quot;editable&quot;:false,&quot;hasCustomHeaderLabel&quot;:false,&quot;customHeaderLabel&quot;:&quot;&quot;,&quot;wrapText&quot;:true,&quot;order&quot;:3,&quot;label&quot;:&quot;Item Status&quot;,&quot;type&quot;:&quot;text&quot;},{&quot;apiName&quot;:&quot;SPEN_Location_Name__c&quot;,&quot;guid&quot;:&quot;column-977d&quot;,&quot;editable&quot;:false,&quot;hasCustomHeaderLabel&quot;:false,&quot;customHeaderLabel&quot;:&quot;&quot;,&quot;wrapText&quot;:true,&quot;order&quot;:4,&quot;label&quot;:&quot;Location Name&quot;,&quot;type&quot;:&quot;customRichText&quot;}]</stringValue>
                </value>
            </inputParameters>
            <inputParameters>
                <name>maxRowSelection</name>
                <value>
                    <numberValue>0.0</numberValue>
                </value>
            </inputParameters>
            <inputParameters>
                <name>isShowSearchBar</name>
                <value>
                    <booleanValue>true</booleanValue>
                </value>
            </inputParameters>
            <inputsOnNextNavToAssocScrn>UseStoredValues</inputsOnNextNavToAssocScrn>
            <isRequired>true</isRequired>
            <storeOutputAutomatically>true</storeOutputAutomatically>
        </fields>
        <showFooter>true</showFooter>
        <showHeader>false</showHeader>
    </screens>
    <screens>
        <description>Invalid_Item_None_Found</description>
        <name>Invalid_Item_None_Found</name>
        <label>Invalid Item</label>
        <locationX>2250</locationX>
        <locationY>1106</locationY>
        <allowBack>true</allowBack>
        <allowFinish>true</allowFinish>
        <allowPause>false</allowPause>
        <backButtonLabel>Retry</backButtonLabel>
        <fields>
            <name>noneFoundENIDMessage</name>
            <fieldText>&lt;p&gt;&lt;span style=&quot;background-color: rgb(255, 255, 255); font-size: 14px; color: rgb(68, 68, 68);&quot;&gt;The chosen Energy Networks ID is not valid and no record has been found. Please go back to re-search or end the process.&lt;/span&gt;&lt;/p&gt;</fieldText>
            <fieldType>DisplayText</fieldType>
        </fields>
        <showFooter>true</showFooter>
        <showHeader>false</showHeader>
    </screens>
    <screens>
        <description>Confirms no inactive items in the multiset have been found.</description>
        <name>Invalid_Item_None_Inactive</name>
        <label>Invalid Item None Inactive</label>
        <locationX>1810</locationX>
        <locationY>1322</locationY>
        <allowBack>true</allowBack>
        <allowFinish>true</allowFinish>
        <allowPause>false</allowPause>
        <backButtonLabel>Retry</backButtonLabel>
        <fields>
            <name>invalidENIDMessageInactiveMultiset</name>
            <fieldText>&lt;p&gt;&lt;span style=&quot;font-size: 14px;&quot;&gt;The chosen Parent Energy Networks ID is not valid as all items linked to this multiset are inactive. Please go back to re-search or end the process.&lt;/span&gt;&lt;/p&gt;</fieldText>
            <fieldType>DisplayText</fieldType>
        </fields>
        <showFooter>true</showFooter>
        <showHeader>false</showHeader>
    </screens>
    <screens>
        <description>Displays details about the invalid item in a data table.</description>
        <name>InvalidENID</name>
        <label>Invalid ENID</label>
        <locationX>2514</locationX>
        <locationY>1214</locationY>
        <allowBack>true</allowBack>
        <allowFinish>true</allowFinish>
        <allowPause>false</allowPause>
        <backButtonLabel>Retry</backButtonLabel>
        <fields>
            <name>invalidENIDMessage</name>
            <fieldText>&lt;p&gt;&lt;span style=&quot;font-size: 14px;&quot;&gt;The chosen Energy Networks ID is not valid. Please input or scan the ID for an item that is available for retirement. See below for more information.&lt;/span&gt;&lt;/p&gt;</fieldText>
            <fieldType>DisplayText</fieldType>
        </fields>
        <fields>
            <name>invalidENIDInformation</name>
            <dataTypeMappings>
                <typeName>T</typeName>
                <typeValue>SerializedProduct</typeValue>
            </dataTypeMappings>
            <extensionName>flowruntime:datatable</extensionName>
            <fieldType>ComponentInstance</fieldType>
            <inputParameters>
                <name>label</name>
                <value>
                    <stringValue>Item Information</stringValue>
                </value>
            </inputParameters>
            <inputParameters>
                <name>selectionMode</name>
                <value>
                    <stringValue>NO_SELECTION</stringValue>
                </value>
            </inputParameters>
            <inputParameters>
                <name>minRowSelection</name>
                <value>
                    <numberValue>0.0</numberValue>
                </value>
            </inputParameters>
            <inputParameters>
                <name>tableData</name>
                <value>
                    <elementReference>invalidENIDCollection</elementReference>
                </value>
            </inputParameters>
            <inputParameters>
                <name>columns</name>
                <value>
                    <stringValue>[{&quot;apiName&quot;:&quot;SPEN_Energy_Networks_ID__c&quot;,&quot;guid&quot;:&quot;column-749a&quot;,&quot;editable&quot;:false,&quot;hasCustomHeaderLabel&quot;:false,&quot;customHeaderLabel&quot;:&quot;&quot;,&quot;wrapText&quot;:true,&quot;order&quot;:0,&quot;label&quot;:&quot;Energy Networks ID&quot;,&quot;type&quot;:&quot;customRichText&quot;},{&quot;apiName&quot;:&quot;SPEN_Item_Status__c&quot;,&quot;guid&quot;:&quot;column-772e&quot;,&quot;editable&quot;:false,&quot;hasCustomHeaderLabel&quot;:false,&quot;customHeaderLabel&quot;:&quot;&quot;,&quot;wrapText&quot;:true,&quot;order&quot;:1,&quot;label&quot;:&quot;Item Status&quot;,&quot;type&quot;:&quot;text&quot;},{&quot;apiName&quot;:&quot;SPEN_Location_Name__c&quot;,&quot;guid&quot;:&quot;column-b625&quot;,&quot;editable&quot;:false,&quot;hasCustomHeaderLabel&quot;:true,&quot;customHeaderLabel&quot;:&quot;Current Location&quot;,&quot;wrapText&quot;:true,&quot;order&quot;:2,&quot;label&quot;:&quot;Location Name&quot;,&quot;type&quot;:&quot;customRichText&quot;},{&quot;apiName&quot;:&quot;SPEN_Active__c&quot;,&quot;guid&quot;:&quot;column-32ad&quot;,&quot;editable&quot;:false,&quot;hasCustomHeaderLabel&quot;:false,&quot;customHeaderLabel&quot;:&quot;&quot;,&quot;wrapText&quot;:true,&quot;order&quot;:3,&quot;label&quot;:&quot;Active&quot;,&quot;type&quot;:&quot;boolean&quot;}]</stringValue>
                </value>
            </inputParameters>
            <inputParameters>
                <name>maxRowSelection</name>
                <value>
                    <numberValue>0.0</numberValue>
                </value>
            </inputParameters>
            <inputsOnNextNavToAssocScrn>UseStoredValues</inputsOnNextNavToAssocScrn>
            <isRequired>true</isRequired>
            <storeOutputAutomatically>true</storeOutputAutomatically>
        </fields>
        <showFooter>true</showFooter>
        <showHeader>false</showHeader>
    </screens>
    <screens>
        <description>Displays details about the invalid item in a data table.</description>
        <name>InvalidProduct</name>
        <label>Invalid Item</label>
        <locationX>1018</locationX>
        <locationY>998</locationY>
        <allowBack>false</allowBack>
        <allowFinish>true</allowFinish>
        <allowPause>false</allowPause>
        <fields>
            <name>invalidProductMessage</name>
            <fieldText>&lt;p&gt;&lt;span style=&quot;color: rgb(68, 68, 68); background-color: rgb(255, 255, 255); font-size: 14px;&quot;&gt;The chosen item is not active. Please choose an item that is available for retirement. See below for more information.&lt;/span&gt;&lt;/p&gt;</fieldText>
            <fieldType>DisplayText</fieldType>
        </fields>
        <fields>
            <name>invalidProductInformation</name>
            <dataTypeMappings>
                <typeName>T</typeName>
                <typeValue>SerializedProduct</typeValue>
            </dataTypeMappings>
            <extensionName>flowruntime:datatable</extensionName>
            <fieldType>ComponentInstance</fieldType>
            <inputParameters>
                <name>label</name>
                <value>
                    <stringValue>Item Information</stringValue>
                </value>
            </inputParameters>
            <inputParameters>
                <name>selectionMode</name>
                <value>
                    <stringValue>NO_SELECTION</stringValue>
                </value>
            </inputParameters>
            <inputParameters>
                <name>minRowSelection</name>
                <value>
                    <numberValue>0.0</numberValue>
                </value>
            </inputParameters>
            <inputParameters>
                <name>tableData</name>
                <value>
                    <elementReference>invalidProductCollection</elementReference>
                </value>
            </inputParameters>
            <inputParameters>
                <name>maxRowSelection</name>
                <value>
                    <numberValue>0.0</numberValue>
                </value>
            </inputParameters>
            <inputParameters>
                <name>columns</name>
                <value>
                    <stringValue>[{&quot;apiName&quot;:&quot;SPEN_Energy_Networks_ID__c&quot;,&quot;guid&quot;:&quot;column-24db&quot;,&quot;editable&quot;:false,&quot;hasCustomHeaderLabel&quot;:false,&quot;customHeaderLabel&quot;:&quot;&quot;,&quot;wrapText&quot;:true,&quot;order&quot;:0,&quot;label&quot;:&quot;Energy Networks ID&quot;,&quot;type&quot;:&quot;customRichText&quot;},{&quot;apiName&quot;:&quot;SPEN_Item_Status__c&quot;,&quot;guid&quot;:&quot;column-baee&quot;,&quot;editable&quot;:false,&quot;hasCustomHeaderLabel&quot;:false,&quot;customHeaderLabel&quot;:&quot;&quot;,&quot;wrapText&quot;:true,&quot;order&quot;:1,&quot;label&quot;:&quot;Item Status&quot;,&quot;type&quot;:&quot;text&quot;},{&quot;apiName&quot;:&quot;SPEN_Location_Name__c&quot;,&quot;guid&quot;:&quot;column-5d18&quot;,&quot;editable&quot;:false,&quot;hasCustomHeaderLabel&quot;:true,&quot;customHeaderLabel&quot;:&quot;Current Location&quot;,&quot;wrapText&quot;:true,&quot;order&quot;:2,&quot;label&quot;:&quot;Location Name&quot;,&quot;type&quot;:&quot;customRichText&quot;},{&quot;apiName&quot;:&quot;SPEN_Active__c&quot;,&quot;guid&quot;:&quot;column-189e&quot;,&quot;editable&quot;:false,&quot;hasCustomHeaderLabel&quot;:false,&quot;customHeaderLabel&quot;:&quot;&quot;,&quot;wrapText&quot;:true,&quot;order&quot;:3,&quot;label&quot;:&quot;Active&quot;,&quot;type&quot;:&quot;boolean&quot;}]</stringValue>
                </value>
            </inputParameters>
            <inputsOnNextNavToAssocScrn>UseStoredValues</inputsOnNextNavToAssocScrn>
            <isRequired>true</isRequired>
            <storeOutputAutomatically>true</storeOutputAutomatically>
        </fields>
        <nextOrFinishButtonLabel>Finish</nextOrFinishButtonLabel>
        <showFooter>true</showFooter>
        <showHeader>false</showHeader>
    </screens>
    <screens>
        <description>Screen to confirm to the user that the system is missing permission sets, these need to be uploaded before an inspection is logged in the system for authorisation checks.</description>
        <name>Missing_Permission_Sets_Screen</name>
        <label>Missing Permission Sets Screen</label>
        <locationX>314</locationX>
        <locationY>674</locationY>
        <allowBack>false</allowBack>
        <allowFinish>true</allowFinish>
        <allowPause>false</allowPause>
        <fields>
            <name>MissingPermissionSetsDisplay</name>
            <fieldText>&lt;p&gt;&lt;span style=&quot;font-size: 14px;&quot;&gt;There are missing permissions in the system to check you are authorised. Please advise the system administrator of the below issue.&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-size: 14px;&quot;&gt;One of the below custom permissions are missing in the Salesforce system:&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;ul&gt;&lt;li&gt;&lt;span style=&quot;font-size: 14px;&quot;&gt;Compliance Team&lt;/span&gt;&lt;/li&gt;&lt;li&gt;&lt;span style=&quot;font-size: 14px;&quot;&gt;Site Manager&lt;/span&gt;&lt;/li&gt;&lt;/ul&gt;</fieldText>
            <fieldType>DisplayText</fieldType>
        </fields>
        <showFooter>true</showFooter>
        <showHeader>false</showHeader>
    </screens>
    <screens>
        <description>Screen to confirm the Compliance Stores record type for Product Transfers is missing from the system.</description>
        <name>Missing_Product_Transfer_Record_Type_Screen</name>
        <label>Missing Product Transfer Record Type Screen</label>
        <locationX>1672</locationX>
        <locationY>3422</locationY>
        <allowBack>false</allowBack>
        <allowFinish>true</allowFinish>
        <allowPause>false</allowPause>
        <fields>
            <name>MissingProductTransferRecordTypeScreen</name>
            <fieldText>&lt;p&gt;&lt;span style=&quot;font-size: 14px;&quot;&gt;You cannot process end of life for this equipment. Please advise the system administrator of the below issue.&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-size: 14px;&quot;&gt;The below Record Type is missing from the Product Transfer object:&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;ul&gt;&lt;li&gt;&lt;span style=&quot;font-size: 14px;&quot;&gt;Compliance Stores&lt;/span&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;</fieldText>
            <fieldType>DisplayText</fieldType>
        </fields>
        <showFooter>true</showFooter>
        <showHeader>false</showHeader>
    </screens>
    <screens>
        <description>Screen to confirm the Compliance Stores record type for Serialised Products is missing from the system.</description>
        <name>Missing_Serialised_Product_Record_Type_Screen</name>
        <label>Missing Serialised Product Record Type Screen</label>
        <locationX>50</locationX>
        <locationY>674</locationY>
        <allowBack>false</allowBack>
        <allowFinish>true</allowFinish>
        <allowPause>false</allowPause>
        <fields>
            <name>MissingSerialisedProductRecordTypeDisplayText</name>
            <fieldText>&lt;p&gt;&lt;span style=&quot;font-size: 14px;&quot;&gt;You cannot process end of life for the equipment at this time. Please advise the system administrator of the below issue.&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-size: 14px;&quot;&gt;The below Record Type is missing from the Serialised Product object:&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;ul&gt;&lt;li&gt;&lt;span style=&quot;font-size: 14px;&quot;&gt;Compliance Stores&lt;/span&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;</fieldText>
            <fieldType>DisplayText</fieldType>
        </fields>
        <showFooter>true</showFooter>
        <showHeader>false</showHeader>
    </screens>
    <screens>
        <description>Screen to display the option to retire multiple items in the multiset.</description>
        <name>Multiset_Check_Global</name>
        <label>Global Multiset Check</label>
        <locationX>1414</locationX>
        <locationY>1322</locationY>
        <allowBack>false</allowBack>
        <allowFinish>true</allowFinish>
        <allowPause>false</allowPause>
        <connector>
            <targetReference>Check_If_User_Selected_Rows</targetReference>
        </connector>
        <fields>
            <name>Copy_1_of_displayENIDs</name>
            <fieldText>&lt;p&gt;&lt;span style=&quot;font-size: 14px;&quot;&gt;Parent Energy Networks ID: &lt;/span&gt;&lt;strong style=&quot;font-size: 14px;&quot;&gt;{!recordId.SPEN_Parent_Energy_Networks_ID__c}&lt;/strong&gt;&lt;/p&gt;</fieldText>
            <fieldType>DisplayText</fieldType>
        </fields>
        <fields>
            <name>Multiset_Check_Global_Section1</name>
            <fieldType>RegionContainer</fieldType>
            <fields>
                <name>Multiset_Check_Global_Section1_Column1</name>
                <fieldType>Region</fieldType>
                <fields>
                    <name>displaySelectionPromptGlobal</name>
                    <fieldText>&lt;p&gt;&lt;span style=&quot;color: rgb(68, 68, 68); background-color: rgb(255, 255, 255); font-size: 14px;&quot;&gt;Please select the items you would like to retire:&lt;/span&gt;&lt;/p&gt;</fieldText>
                    <fieldType>DisplayText</fieldType>
                </fields>
                <fields>
                    <name>Copy_1_of_datatableSelectRecords</name>
                    <dataTypeMappings>
                        <typeName>T</typeName>
                        <typeValue>SerializedProduct</typeValue>
                    </dataTypeMappings>
                    <extensionName>flowruntime:datatable</extensionName>
                    <fieldType>ComponentInstance</fieldType>
                    <inputParameters>
                        <name>label</name>
                        <value>
                            <stringValue>Multiset Items</stringValue>
                        </value>
                    </inputParameters>
                    <inputParameters>
                        <name>selectionMode</name>
                        <value>
                            <stringValue>MULTI_SELECT</stringValue>
                        </value>
                    </inputParameters>
                    <inputParameters>
                        <name>minRowSelection</name>
                        <value>
                            <numberValue>0.0</numberValue>
                        </value>
                    </inputParameters>
                    <inputParameters>
                        <name>shouldDisplayLabel</name>
                        <value>
                            <booleanValue>true</booleanValue>
                        </value>
                    </inputParameters>
                    <inputParameters>
                        <name>tableData</name>
                        <value>
                            <elementReference>recordIdsCollectionForSelection</elementReference>
                        </value>
                    </inputParameters>
                    <inputParameters>
                        <name>isShowSearchBar</name>
                        <value>
                            <booleanValue>true</booleanValue>
                        </value>
                    </inputParameters>
                    <inputParameters>
                        <name>columns</name>
                        <value>
                            <stringValue>[{&quot;apiName&quot;:&quot;SPEN_Type__c&quot;,&quot;guid&quot;:&quot;column-d6b3&quot;,&quot;editable&quot;:false,&quot;hasCustomHeaderLabel&quot;:false,&quot;customHeaderLabel&quot;:&quot;&quot;,&quot;wrapText&quot;:true,&quot;order&quot;:0,&quot;label&quot;:&quot;Type&quot;,&quot;type&quot;:&quot;customRichText&quot;},{&quot;apiName&quot;:&quot;SPEN_Energy_Networks_ID__c&quot;,&quot;guid&quot;:&quot;column-8de1&quot;,&quot;editable&quot;:false,&quot;hasCustomHeaderLabel&quot;:false,&quot;customHeaderLabel&quot;:&quot;&quot;,&quot;wrapText&quot;:true,&quot;order&quot;:1,&quot;label&quot;:&quot;Energy Networks ID&quot;,&quot;type&quot;:&quot;customRichText&quot;},{&quot;apiName&quot;:&quot;SPEN_Location_Name__c&quot;,&quot;guid&quot;:&quot;column-7016&quot;,&quot;editable&quot;:false,&quot;hasCustomHeaderLabel&quot;:true,&quot;customHeaderLabel&quot;:&quot;Current Location&quot;,&quot;wrapText&quot;:true,&quot;order&quot;:2,&quot;label&quot;:&quot;Location Name&quot;,&quot;type&quot;:&quot;customRichText&quot;},{&quot;apiName&quot;:&quot;SPEN_Base_Location_Name__c&quot;,&quot;guid&quot;:&quot;column-01d6&quot;,&quot;editable&quot;:false,&quot;hasCustomHeaderLabel&quot;:true,&quot;customHeaderLabel&quot;:&quot;Base Location&quot;,&quot;wrapText&quot;:true,&quot;order&quot;:3,&quot;label&quot;:&quot;Base Location Name&quot;,&quot;type&quot;:&quot;customRichText&quot;},{&quot;apiName&quot;:&quot;SPEN_Item_Status__c&quot;,&quot;guid&quot;:&quot;column-dcd2&quot;,&quot;editable&quot;:false,&quot;hasCustomHeaderLabel&quot;:false,&quot;customHeaderLabel&quot;:&quot;&quot;,&quot;wrapText&quot;:true,&quot;order&quot;:4,&quot;label&quot;:&quot;Item Status&quot;,&quot;type&quot;:&quot;text&quot;}]</stringValue>
                        </value>
                    </inputParameters>
                    <inputsOnNextNavToAssocScrn>UseStoredValues</inputsOnNextNavToAssocScrn>
                    <isRequired>true</isRequired>
                    <outputParameters>
                        <assignToReference>selectedRecordIds</assignToReference>
                        <name>selectedRows</name>
                    </outputParameters>
                    <outputParameters>
                        <assignToReference>recordId</assignToReference>
                        <name>firstSelectedRow</name>
                    </outputParameters>
                </fields>
                <inputParameters>
                    <name>width</name>
                    <value>
                        <stringValue>12</stringValue>
                    </value>
                </inputParameters>
                <isRequired>false</isRequired>
            </fields>
            <isRequired>false</isRequired>
            <regionContainerType>SectionWithoutHeader</regionContainerType>
        </fields>
        <showFooter>true</showFooter>
        <showHeader>false</showHeader>
    </screens>
    <screens>
        <description>Screen to confirm to user no rows selected.</description>
        <name>No_Rows_Selected_Confirmation</name>
        <label>No Rows Selected Confirmation</label>
        <locationX>1546</locationX>
        <locationY>1538</locationY>
        <allowBack>true</allowBack>
        <allowFinish>true</allowFinish>
        <allowPause>false</allowPause>
        <backButtonLabel>Reselect</backButtonLabel>
        <fields>
            <name>noneSelectedDisplayText</name>
            <fieldText>&lt;p&gt;&lt;span style=&quot;color: rgb(68, 68, 68); font-size: 14px; background-color: rgb(255, 255, 255);&quot;&gt;You haven&apos;t selected any items to deactivate.&lt;/span&gt;&lt;/p&gt;</fieldText>
            <fieldType>DisplayText</fieldType>
        </fields>
        <nextOrFinishButtonLabel>Cancel</nextOrFinishButtonLabel>
        <showFooter>true</showFooter>
        <showHeader>false</showHeader>
    </screens>
    <start>
        <locationX>647</locationX>
        <locationY>0</locationY>
        <connector>
            <targetReference>Get_Compliance_Team_Permission_Set_Id</targetReference>
        </connector>
    </start>
    <status>Active</status>
    <variables>
        <name>complianceTeamPermissionSetId</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>foundPermissionSetAssignmentId</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>invalidENIDCollection</name>
        <dataType>SObject</dataType>
        <isCollection>true</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>SerializedProduct</objectType>
    </variables>
    <variables>
        <name>invalidProductCollection</name>
        <dataType>SObject</dataType>
        <isCollection>true</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>SerializedProduct</objectType>
    </variables>
    <variables>
        <name>newLocation</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>Location</objectType>
    </variables>
    <variables>
        <name>productTransfer</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>ProductTransfer</objectType>
    </variables>
    <variables>
        <name>productTransfers</name>
        <dataType>SObject</dataType>
        <isCollection>true</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>ProductTransfer</objectType>
    </variables>
    <variables>
        <name>productTransferState</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>ProductTransferState</objectType>
    </variables>
    <variables>
        <name>productTransferStates</name>
        <dataType>SObject</dataType>
        <isCollection>true</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>ProductTransferState</objectType>
    </variables>
    <variables>
        <name>recordId</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>false</isOutput>
        <objectType>SerializedProduct</objectType>
    </variables>
    <variables>
        <name>recordIdsCollection</name>
        <dataType>SObject</dataType>
        <isCollection>true</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>SerializedProduct</objectType>
    </variables>
    <variables>
        <description>Record Collection for users to choose which items they want to EoL.</description>
        <name>recordIdsCollectionForSelection</name>
        <dataType>SObject</dataType>
        <isCollection>true</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>SerializedProduct</objectType>
    </variables>
    <variables>
        <name>selectedRecordIds</name>
        <dataType>SObject</dataType>
        <isCollection>true</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>SerializedProduct</objectType>
    </variables>
    <variables>
        <name>siteManagerPermissionSetId</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>updatedProductTransfer</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>ProductTransfer</objectType>
    </variables>
    <variables>
        <name>updatedProductTransfers</name>
        <dataType>SObject</dataType>
        <isCollection>true</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>ProductTransfer</objectType>
    </variables>
    <variables>
        <name>updatedSerializedProduct</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>SerializedProduct</objectType>
    </variables>
    <variables>
        <name>updatedSerializedProducts</name>
        <dataType>SObject</dataType>
        <isCollection>true</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>SerializedProduct</objectType>
    </variables>
</Flow>
